---
phase: 02-dashboard-source
plan: 02
type: execute
---

<objective>
Update SummaryCards with source breakdown and enhance ProjectDetail to show remote metadata and local-vs-remote diff for synced repos.

Purpose: The overview page needs source counts at a glance, and the detail page needs to surface the rich metadata and diff data that the scanner now collects.
Output: Updated SummaryCards with source row, updated ProjectDetail with remote metadata and diff sections.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@.planning/phases/02-dashboard-source/02-01-SUMMARY.md
@scanner/types.ts
@src/components/SummaryCards.tsx
@src/components/ProjectDetail.tsx
@src/components/SourceBadge.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add source breakdown to SummaryCards</name>
  <files>src/components/SummaryCards.tsx</files>
  <action>
  Add a second row of metrics below the existing status row that shows source breakdown.

  Add source metrics array:
  ```
  const sourceMetrics = [
    { label: 'Local', key: 'local-only', dot: 'bg-slate-400' },
    { label: 'Remote', key: 'remote-only', dot: 'bg-sky-400' },
    { label: 'Synced', key: 'synced', dot: 'bg-emerald-400' },
  ];
  ```

  Compute source counts alongside existing status counts:
  ```
  'local-only': projects.filter(p => p.source === 'local-only').length,
  'remote-only': projects.filter(p => p.source === 'remote-only').length,
  'synced': projects.filter(p => p.source === 'synced').length,
  ```

  Render the source row with the same layout as the status row but separated with a small gap. Use a subtle label like "By source:" before the metrics to distinguish from the status row above.

  Keep the existing status metrics exactly as they are — just add below them.
  </action>
  <verify>npm run build — no errors. Dev server shows source counts in summary area.</verify>
  <done>SummaryCards shows Local/Remote/Synced counts alongside existing status counts</done>
</task>

<task type="auto">
  <name>Task 2: Add remote metadata and diff sections to ProjectDetail</name>
  <files>src/components/ProjectDetail.tsx</files>
  <action>
  Add two new sections to the ProjectDetail component:

  **1. Source & Remote Metadata section** (add after the Header, before Description):
  - Show SourceBadge for the project's source type
  - Show visibility badge: "Public" (green) or "Private" (amber) — only if visibility is not null
  - Show archived badge if `isArchived` is true (rose color, "Archived" label)
  - Show fork badge if `isFork` is true (slate color, "Fork" label)
  - Show repo size: format `sizeKB` nicely (e.g., "1.2 MB" if > 1024, else "45 KB")
  - Show license if present (e.g., "MIT", "Apache-2.0")
  - Show languages as a horizontal bar chart (proportional colored segments based on byte counts). Use a simple div-based bar with percentage widths. Show top 5 languages with labels. Use distinct colors for common languages (TypeScript=blue, JavaScript=yellow, Python=green, Go=cyan, Rust=orange, etc.) with a fallback gray for unknown. If no languages data, show "No language data".
  - Show topics as pills (similar to techStack styling but with a different color — use purple: bg-purple-100, text-purple-600)

  **2. Local vs Remote Diff section** (add after "Where I Left Off", only shown when `project.diff` is not null):
  - Title: "Local vs Remote"
  - Show current local branch name and remote branch name
  - Show ahead/behind as: "2 ahead, 1 behind origin/main" with colored indicators (emerald for ahead, amber for behind). If both are 0, show "Up to date" in green.
  - Show uncommitted changes indicator: green "Clean" or amber "Uncommitted changes"
  - If `localOnlyBranches.length > 0`: list them as "Local-only branches: feature-x, bugfix-y"
  - If `remoteOnlyBranches.length > 0`: list them as "Remote-only branches: dependabot/npm, release-v2"

  Use the existing card styling (rounded-lg border border-slate-200 bg-white p-5) consistent with other sections.

  Import SourceBadge. Import ProjectSource and LocalRemoteDiff from scanner/types.
  </action>
  <verify>npm run build — no errors. Dev server project detail page shows new sections.</verify>
  <done>ProjectDetail shows source badge, visibility, languages bar, topics, license, size for all projects. Synced projects also show diff section with ahead/behind, branch divergence, and uncommitted changes indicator.</done>
</task>

</tasks>

<verification>
Before declaring this plan complete:
- [ ] `npm run build` succeeds
- [ ] SummaryCards shows source counts
- [ ] ProjectDetail shows remote metadata for all projects
- [ ] ProjectDetail shows diff section for synced projects only
- [ ] Diff section omitted gracefully when project.diff is null
- [ ] No regressions in existing components
</verification>

<success_criteria>
- SummaryCards displays Local/Remote/Synced counts
- ProjectDetail surfaces all new metadata fields
- Diff section shows ahead/behind, uncommitted changes, branch divergence
- Phase 02 complete
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-source/02-02-SUMMARY.md`
</output>
